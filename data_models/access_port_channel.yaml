fields:
  topology:
    type: model
    required: true
    model:
      fields:
        switches:
          type: list[model]
          required: true
          model:
            fields:
              name:
                type: str
                required: true
              interfaces:
                type: list[model]
                required: true
                model: # This is the 'topology_switch_access_po_interface' model
                  fields:
                    name:
                      type: str
                      required: true
                      validation:
                        pattern: '(?i)^(po|port-channel)([1-9]|[1-9][0-9]{1,2}|[1-3][0-9]{3}|40[0-8][0-9]|409[0-6])$'
                    mode:
                      type: str
                      required: true
                      validation:
                        choices: ['access']
                    description:
                      type: str
                      required: false
                      default: 'NetAsCode Access PO Interface'
                      validation:
                        max_length: 256
                    vpc_id:
                      type: int
                      required: false
                      validation:
                        ge: 1
                        le: 4906
                    mtu:
                      required: false
                      default: 'jumbo'
                      union:
                        - type: int
                          validation:
                            ge: 1500
                            le: 9216
                        - type: str
                          validation:
                            choices: ['default', 'jumbo']
                    speed:
                      type: str
                      required: false
                      default: 'auto'
                      validation:
                        pattern: '(?i)^(auto|100mb|1gb|10gb|25gb|40gb|100gb|200gb|400gb|800gb)$'
                    enabled:
                      type: bool
                      required: false
                      default: true
                    spanning_tree_portfast:
                      type: bool
                      required: false
                      default: true
                    enable_bpdu_guard:
                      type: bool
                      required: false
                      default: true
                    pc_mode:
                      type: str
                      required: false
                      default: 'active'
                      validation:
                        choices: ['active', 'on', 'passive']
                    members:
                      type: list[str]
                      required: true
                      validation:
                        pattern: '(?i)^(?:e|eth(?:ernet)?)\d(?:\/\d+){1,2}$'
                    access_vlan:
                      type: int
                      required: false
                      default: 1
                      validation:
                        ge: 1
                        le: 4094
                    duplex:
                      type: str
                      required: false
                      default: 'auto'
                      validation:
                        choices: ['auto', 'full', 'half']
                    orphan_port:
                      type: bool
                      required: false
                      default: false
                    freeform_config:
                      type: str
                      required: false
